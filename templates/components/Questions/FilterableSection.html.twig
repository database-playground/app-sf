<section{{ attributes }}>
    <section class="d-flex justify-content-between flex-column flex-md-row mb-4 gap-2">
        <h1>{{ title }}</h1>

        <div class="d-flex gap-1">
            <form action="{{ path('app_exercises') }}" method="GET">
                <input type="search" data-model="debounce(100)|query" class="form-control" placeholder="搜尋題目……"
                       aria-label="搜尋題目">
            </form>
        </div>
    </section>

    <section {{ attributes.defaults({ class: "questions row row-cols-1 row-cols-md-2 row-cols-lg-4 gap-4" }) }}>
        {# HACK: Add a fake previous item for reserving the elements from the previous page.
           Referenced from https://ux.symfony.com/demos/live-component/infinite-scroll-2 #}
        {% if currentPage > 1 %}
            <div id="item--{{ currentPage - 1 }}-{{ pageSize }}"></div>
        {% endif %}

        {% for item in this.questions %}
            <div class="col" id="item--{{ currentPage }}-{{ loop.index }}" data-live-ignore>
                <twig:Questions:Card :question="item"></twig:Questions:Card>
            </div>
        {% endfor %}
    </section>

    {% if this.hasMore %}
        <div class="d-flex justify-content-center">
            <button class="btn btn-secondary"
                    data-action="live#action"
                    data-live-action-param="nextPage">
                載入更多
            </button>
        </div>
    {% endif %}
</section>
