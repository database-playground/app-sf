{% extends 'app.html.twig' %}

{% block nav %}<twig:Navbar active="profile" />{% endblock %}
{% block title %}å€‹äººè³‡æ–™{% endblock %}

{% block app %}
    <div class="profile d-flex row">
        <turbo-frame id="app-profile-information" class="profile__information col gr-5">
            <h2 class="mb-3">
                {{ user.name }}

                {% if 'ROLE_ADMIN' in user.roles %}
                    <small class="text-muted">ç®¡ç†å“¡</small>
                {% endif %}

                {% if user.group != null %}
                    <small class="text-muted">{{ user.group.name }}</small>
                {% endif %}
            </h2>

            <ul class="list-group">
                <li class="list-group-item">
                    <i class="bi bi-envelope-at-fill"></i>
                    é›»å­ä¿¡ç®±ï¼š{{ user.email }}
                </li>
                <li class="list-group-item">
                    <i class="bi bi-person-fill"></i>
                    å¸³è™Ÿå»ºç«‹æ™‚é–“ï¼š{{ user.createdAt.format("Y-m-d H:i:s") }}
                </li>
                <li class="list-group-item">
                    <i class="bi bi-award-fill"></i>
                    è§£é¡Œæ¬¡æ•¸ï¼š{{ user.solutionEvents.count }}
                </li>
                <li class="list-group-item">
                    <i class="bi bi-eye-fill"></i>
                    è§€çœ‹å½±ç‰‡æ¬¡æ•¸ï¼š{{ user.solutionVideoEvents.count }}
                </li>
            </ul>
        </turbo-frame>

        <section class="profile__update col">
            <h2 class="mb-4">æ›´æ–°å¸³è™Ÿè³‡è¨Š</h2>

            <turbo-frame id="app-profile-update" class="profile__update__password">
                <h3 class="mb-3">å¯†ç¢¼æ›´æ–°</h3>

                {% if password_updated %}
                    <div class="alert alert-success" role="alert">
                        å¯†ç¢¼æ›´æ–°å®Œæˆ ğŸ‰
                    </div>
                {% endif %}

                {{ form(password_change_form) }}
            </turbo-frame>
        </section>
    </div>
{% endblock %}
