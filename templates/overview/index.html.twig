{% extends 'app.html.twig' %}

{% block nav %}<twig:Navbar active="overview" />{% endblock %}
{% block title %}å­¸ç¿’æ¦‚æ³{% endblock %}

{% block app %}
    <section class="hello-text mb-5">
        <h2 class="display-4">å“ˆå›‰ï¼Œ{{ app.user.name }} ğŸ‘‹</h2>
        <p class="lead">é€™äº›æ˜¯ä½ æœ€è¿‘çš„è¡¨ç¾ â†“</p>
    </section>

    <section class="week-overview mb-5">
        <h3 class="mb-3">æ¯é€±å­¸ç¿’æ¦‚æ³</h3>

        <div class="week-overview__main row gutter-2">
            <div class="col-4">
                <div class="week-overview__cards vstack gap-1">
                    <twig:MetricCard title="è§£é¡Œæ•¸" property="positive">{{ solved_questions }}</twig:MetricCard>
                    <twig:MetricCard title="ç¶“é©—å€¼" property="negative">{{ points }}</twig:MetricCard>
                    <twig:MetricCard title="ç­‰ç´š">WIP</twig:MetricCard>
                </div>
            </div>
            <div class="col-8">
                <p>WIP: Chart</p>
            </div>
        </div>
    </section>

    <section class="historic-statistics mb-5">
        <h3 class="mb-3">å­¸ç¿’æ­·ç¨‹</h3>

        <div class="historic-statistics__main row gutter-2">
            <div class="col-4">
                <div class="historic-statistics__cards vstack gap-1">
                    <twig:MetricCard title="ç­”å°é¡Œæ•¸" property="positive">{{ solved_questions }}</twig:MetricCard>
                    <twig:MetricCard title="æ”»å…‹é¡Œæ•¸">{{ events_count }}</twig:MetricCard>
                    <twig:MetricCard title="é¡Œç›®æ•¸">{{ questions_count }}</twig:MetricCard>
                </div>
            </div>
            <div class="col-4">
                <div class="historic-statistics__events vstack gap-3">
                    {% for event in first_five_events %}
                        {% set badgeClassName = event.status == constant('App\\Entity\\SolutionEventStatus::Passed') ? "text-bg-success" : "text-bg-danger" %}
                        <div class="historic-statistics__events__row d-flex gap-3 align-items-center">
                            <div class="historic-statistics__events__row__time text-end opacity-75 lh-1">{{ event.createdAt.format("g:i A") }}</div>
                            <div class="historic-statistics__events__row__status {{ loop.index == 1 ? "historic-statistics__events__row__status--first" : "" }}">
                                <div class="historic-statistics__events__row__status__text badge rounded-3 lh-1 {{ badgeClassName }}">{{ event.status|trans }}</div>
                            </div>
                            <div class="historic-statistics__events__row__description lh-1">æŒ‘æˆ°ç¬¬ {{ event.question.id }} é¡Œ</div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-4">
                <p>WIP: Chart</p>
            </div>
        </div>
    </section>
{% endblock %}
